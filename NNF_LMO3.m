function [y1] = NNF_LMO3(x1)
%MYNEURALNETWORKFUNCTION neural network simulation function.
%
% Auto-generated by MATLAB, 05-May-2020 23:32:23.
%
% [y1] = myNeuralNetworkFunction(x1) takes these arguments:
%   x = Qx11 matrix, input #1
% and returns:
%   y = Qx1 matrix, output #1
% where Q is the number of samples.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [4;5;0.2;0;2;0;0.1;996.6;0;-4;10];
x1_step1.gain = [0.00809716599190283;0.00400801603206413;0.740740740740741;0.0121212121212121;0.00181653042688465;0.00826446280991736;0.5;0.0461893764434179;0.00640820249919897;0.0476190476190476;0.0222222222222222];
x1_step1.ymin = -1;

% Layer 1
b1 = [9.3355033160477347565;-5.4844779423948928354;1.6572928208446249254;-2.9125991326146420946;2.8057614060028575054;-1.8590621707143868413;-0.95210603650252112473;-6.2138216417379465994;11.031698954495475107;1.1929494634071440284;2.9521205519810864715;0.32511945676636178071;7.7706972540339824818];
IW1_1 = [4.9481280620150620564 -5.567373047131752628 2.3452526413989298604 0.1605488172927211632 10.411494473301269537 -3.9484020610806509488 -0.36898621307860934859 -0.22090663760197992715 -0.85585963786011998167 -0.66754529073018098462 0.18622280905092380987;-1.0062340602784733967 1.885678014809430536 1.903699799510987889 0.24716316563174975385 -7.2946901990045995845 -1.0451913403273020986 0.45524885678564058766 0.8327025047039420258 -0.29337654654556122313 1.6669849578312636584 0.01567324242291251446;4.5479127875348748233 -5.6851911025591865823 -0.7074380632136780811 4.4886938351022473981 0.7815836204492161432 -17.04026794681610113 -0.48220537911861238722 4.5316187387243633822 -3.1467009841070994192 8.9798932864221754357 0.87100959605918215622;2.1924369319215988305 2.1869497832954265526 -2.7780209592274123231 0.44455842285170066308 3.5185717360364767714 -1.0893369501794634147 -0.5572749471282052447 10.283885225828322874 -0.14405982937019190526 -0.38680407508752312484 -6.7404876942573039855;-6.0282660409670114632 5.9757639114849290252 0.16998282831396677173 3.1683095476762570541 3.2724253870406796452 -3.5898161355368500836 1.6130840362737157712 -2.1891256508790544189 1.2354107446896922529 -1.1363431900059346447 -3.1459437912550121119;-0.36255764073890245358 -1.7563019913342421408 0.070601059156163090136 1.5341470804453516408 -2.7666902526531731432 0.79123138752650323813 -2.024408925456327335 -0.88860727935056116333 0.9082926205647817719 -3.6610380582868087274 -3.1516526333780241487;4.3015031749894614421 -2.7888383577003286184 0.99930318277956031725 -1.3179812231856244953 -2.3933312368736929798 -1.8279741598051850726 -0.024737660520172663481 1.1089058364204844587 0.10600332335009794715 2.3242838556385287951 -0.21143271743389494;20.317241570579323451 -18.563516227284235782 -18.015573055587328355 -6.1681422593093664375 6.8982637190565325724 -21.113735345656937881 -0.76678913227422984544 -5.8993405708600397119 1.6104899227240871973 12.625922245680788691 -6.9924750561891722;3.1203171656961110614 -6.0412826644484400873 6.1795285788334179955 5.7055506841182053179 6.0307857490645275789 -3.4699456208326764362 1.5974599422507664848 -3.9878726963230155533 0.84416224910803316916 -4.5601367226380142839 -3.2741882302154756701;-2.0999166947650782511 1.258841752156016458 12.107948609402860995 -1.8302582258017754402 -0.31159867594738377417 -2.1828806814253094437 -3.1275067225607222632 -2.8957957004380259214 -1.2023603257072570383 -5.0877277140942203104 -0.72517782567724065057;5.1367853983551974295 8.4322280845866881549 -11.891455542532852974 -1.9088295145232276884 -2.2640347352492544708 4.1988337338905878937 1.4597793936529894765 25.262332737307065855 -8.7487467613013318868 13.654367102523632838 1.8077152594940806285;-0.32115610160023388975 0.41629055174523404981 0.10402876638424574107 0.21928382957488490312 -0.37100296064051013767 -0.43812269851164581391 -0.052348060669751665663 0.16542106389525870758 -0.15780529107458721172 -0.065856860385309273775 0.14183705054123460498;0.92327050469727423021 0.53497121349549181524 -16.180838960803654913 -2.5128190457517871614 22.510061258763226277 4.4020491808634663045 1.2470942264610525019 -3.0908574077919834799 4.0149050965871264651 -14.976891114540586969 -0.5287396585205108579];

% Layer 2
b2 = 1.0288407160218060454;
LW2_1 = [0.21119609145906834136 0.46409228380024014626 0.10891959641918254331 0.084140986765450065388 -0.1483719735233454684 0.13595587905810263551 -0.28432167246483758261 0.14955255640725717559 -0.10085008087839805735 -0.099285214097508678321 0.05360157073299952335 -2.5947575170791181698 0.083196912800504341234];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.00775193798449612;
y1_step1.xoffset = 1;

% ===== SIMULATION ========

% Dimensions
Q = size(x1,1); % samples

% Input 1
x1 = x1';
xp1 = mapminmax_apply(x1,x1_step1);

% Layer 1
a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*xp1);

% Layer 2
a2 = repmat(b2,1,Q) + LW2_1*a1;

% Output 1
y1 = mapminmax_reverse(a2,y1_step1);
y1 = y1';
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
y = bsxfun(@minus,x,settings.xoffset);
y = bsxfun(@times,y,settings.gain);
y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
x = bsxfun(@minus,y,settings.ymin);
x = bsxfun(@rdivide,x,settings.gain);
x = bsxfun(@plus,x,settings.xoffset);
end
