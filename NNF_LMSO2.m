function [y1] = NNF_LMSO2(x1)
%MYNEURALNETWORKFUNCTION neural network simulation function.
%
% Auto-generated by MATLAB, 05-May-2020 16:19:26.
%
% [y1] = myNeuralNetworkFunction(x1) takes these arguments:
%   x = Qx11 matrix, input #1
% and returns:
%   y = Qx1 matrix, output #1
% where Q is the number of samples.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [4;5;0.2;0;2;0;0.1;996.6;0;-4;10];
x1_step1.gain = [0.00809716599190283;0.00400801603206413;0.740740740740741;0.0121212121212121;0.00181653042688465;0.00826446280991736;0.5;0.0461893764434179;0.00640820249919897;0.0476190476190476;0.0222222222222222];
x1_step1.ymin = -1;

% Layer 1
b1 = [-41.414261917683411696;-479.12441276256407718;49.480939103985697614;-138.67441283568970789;83.826833315060071072;-49.589049983866154037;-5.9180445605888651883;12.373262430865608508;62.955417754726582302;-89.133659036604669268;-104.38265774675258513;18.467919445712638549;51.324530234650111993;12.298120877257543881;-9.1106154640884220441;43.192742303677441384;-34.772316565564437951;40.879106915010190448;42.117928134822797404;-44.850006424559211382;318.79788674574740526;-141.87625504725514247;-107.27608447544064063];
IW1_1 = [1.0568597309153033859 2.1597703761153663748 -104.93122737170710934 -33.583317073513441642 8.3614118768921468217 116.298425577056733 -37.205998949276306575 68.233844912298877716 -19.255005600416460254 35.022833035990046824 71.922360487580135668;56.616950376285934965 -52.301784477289913866 -15.584947031129297912 -17.646601231414727806 -517.69458364537501893 52.346089269334825644 -2.0841650492647740833 -4.0373069425086312023 3.6228650567812472616 -14.239640597884516637 -22.381577207569534949;-137.85212268281415504 280.8571881574227973 -36.71068903512382775 10.472176530878321898 -58.211627046500126426 31.304132395738143657 28.059676226874330496 -44.398924702092806172 0.82346072128592551209 46.200116249398277546 -4.0314406202497927723;-74.330715755872660111 53.02687138680474277 27.442908928921418976 -31.603696679837856465 -110.65223704811985783 -2.4983114386687894637 -57.755334700369310497 71.229001569626120727 -5.9084755395846011439 85.150830188587661951 67.897908616000421489;5.9927281509079097788 -7.0791638704972257301 0.89701634622023451726 0.67816650219854646142 87.260092108537094191 -0.96706443481967374609 0.48908033639057357789 -0.084725075291934598409 -0.70620686444828839612 -4.9907465143112279549 -0.76956263439251282321;4.40310141937098809 -2.6079867638088529702 7.1162006805660569242 1.0982651643732435076 -64.174080680718475378 -18.284074534102153109 2.0671506718142143022 2.7448653459230349938 7.5316411385141908141 6.5023375628186474984 -1.5893915575506389892;-21.146066931349277951 15.750745347484237158 -27.215344458875662781 -12.928094660361022505 7.1631732195710213773 -9.194249690831075128 11.882075309064822122 -1.2761995431802795053 -9.7485391852496210419 2.8053409757983960304 13.926684262364247502;-0.28100903398680665557 -0.78179332561446757133 -1.2489051199583385277 -0.6809525716942215201 12.181243221092131535 -3.3109464597926656637 0.42129070320207023803 1.2637791355787695302 -2.0037186160113567013 3.1798235000943022577 -0.18610793931454083783;3.0855957103470865732 16.615401167148220907 1.69844494674233637 -33.777694727846991896 77.498529380140297462 -11.057467501422022949 -0.62361571146769834151 12.770724051186009618 7.8541594398705356639 14.932044384117606484 -0.86944002274287290888;-12.03584959014842326 36.651652151411106217 -16.571363023959325034 19.301673257000985018 -108.45872620056594826 15.457832965185199114 9.2262423914621276566 0.75475314229669920874 -4.4356135494020039189 11.658274745677376316 3.5068275834498185972;131.16196272497069231 -79.952990197115198612 -72.410121555348268885 85.662017581303544489 72.370956364704639441 -94.242327773702598392 -44.575445124109094763 -111.49204615087850812 -31.964347321172613903 103.88309183197581831 -46.601665412038315139;8.3784516759110836404 23.870966370634757681 6.3146948979504102795 9.1215571780953137448 -17.540162575434006698 26.786830909975520854 -2.9315181667213092709 32.882592398970054148 -1.0868288446086227239 -49.384126853937601709 22.443246388101027122;-16.34585432369118152 24.716221154025568296 -0.95349601600631084253 -0.89557750194437746316 46.528074287687857691 -6.8007640659929098348 0.60528137628362255196 0.77008336060929483136 -0.37240353551138993815 1.2993208328088883263 0.34111687162379428218;-31.997785859611113324 24.963422127510238369 27.616283994948481961 -7.8850888258112243889 8.5737223564139970478 -13.790888190707077499 0.54125341132751425555 -12.828119113551384345 -16.836575250658370351 6.6477978542405491424 8.1943548174130143025;-2.7515961017536030297 -0.36730199957855852455 6.4998688617498219244 1.5852865197295495925 -24.826723072570601403 -1.3481300786241667833 1.0583625997864505308 -2.033632308965348745 -18.006279009558646464 -7.1558368607705808984 -0.1889887517458716526;-15.06686138863406299 57.565973380168387052 14.094373321129506138 0.81623479193918369035 -39.208020382140723825 -56.394156469373342588 -18.206049577648375504 -4.8315089586799961907 40.166978492928016919 116.29208596479497828 -54.076179906193914348;-8.8647602547275603513 1.881735804891797148 4.6277043560481843087 -0.85573517432520984638 -33.376050518039185988 1.0665389315675055659 0.12555450537154605462 5.8297193232941717511 2.9192807192125163063 4.2406813327643018141 3.4753203264530876382;-14.691702148020207019 14.855016946970886593 1.4562154461310328202 0.51918756043533675903 39.512167982652734111 1.4783127845781944831 0.31810342594717322395 4.8548485519149551237 2.5378120744227792294 3.6805331637876022022 2.666831937365682581;2.8726130603638400096 -4.2705075953716384873 6.700330832132021186 -4.8213747594236098237 39.649292728674559783 22.545126464416082257 -2.7261324375153037636 -4.0797425553903448048 0.40874260655871436088 -6.32542116328825621 -0.23117490509587201863;1.0440232592186196037 0.51381016749792784992 1.41405800574683016 0.36841745691267441254 -45.435850067291141841 3.0399847968400557363 -0.23250863974024296721 -2.3974673720170054381 2.3401152117177024259 -4.2267747813602660756 -0.074852522512152103173;-38.783602872455396948 62.578682191566507242 -24.240355649330442844 3.0155233175221125563 327.79547609057141244 -2.0396949314391430441 3.7173485875847172011 -14.570158390214137611 1.4844006579522188716 -7.8022378187853833609 -12.458231962468127918;-13.617810455361734512 14.442263783543205946 15.626157601263294339 -2.385487972111540067 -147.310333259742265 0.54154921336346495409 -10.706570241012972389 -11.044280544572345093 -3.2129493963044346572 -10.82717919650002969 -2.5286753790267377795;-6.8053793666696016373 8.7004733123322086641 -3.3797970843608253766 -0.83935514563516899766 -109.22428359556315058 0.062522353629103133432 -0.38813053387021034801 0.77529630891400991288 0.50457445686775259652 5.1510456279307277327 1.3380499742753435566];

% Layer 2
b2 = -0.98757074856605575608;
LW2_1 = [-0.0071603876263709531971 0.0067832075672294173813 -0.0086377550128326641837 -0.012697286638986372831 -0.24199156756495721066 0.098063655792700862857 0.013357454861017126896 -0.90289145267298620556 0.03211607539892069596 0.030583178897639104465 -0.0060615488433825937334 0.023678872658605146229 0.12984626104608873454 -0.01515441548582224969 0.23529500544151382702 0.017797353841429983112 -0.12550505571011294492 0.19639160143076858644 0.14018687330093712595 -0.79394505580318641691 -0.040646487441524194184 0.017133131909625346628 -0.22170810638104548884];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.0134228187919463;
y1_step1.xoffset = 1;

% ===== SIMULATION ========

% Dimensions
Q = size(x1,1); % samples

% Input 1
x1 = x1';
xp1 = mapminmax_apply(x1,x1_step1);

% Layer 1
a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*xp1);

% Layer 2
a2 = repmat(b2,1,Q) + LW2_1*a1;

% Output 1
y1 = mapminmax_reverse(a2,y1_step1);
y1 = y1';
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
y = bsxfun(@minus,x,settings.xoffset);
y = bsxfun(@times,y,settings.gain);
y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
x = bsxfun(@minus,y,settings.ymin);
x = bsxfun(@rdivide,x,settings.gain);
x = bsxfun(@plus,x,settings.xoffset);
end
